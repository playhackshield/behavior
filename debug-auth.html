<!DOCTYPE html>
<html>
<head>
    <title>Debug Auth 2</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Auth Debug</h1>
    
    <div>
        <h3>1. Huidige domein:</h3>
        <pre id="domain"></pre>
    </div>
    
    <div>
        <h3>2. Firebase Config:</h3>
        <pre id="config"></pre>
    </div>
    
    <div>
        <h3>3. Test Google Login:</h3>
        <button onclick="testLogin()">Test Login</button>
        <div id="result"></div>
    </div>
    
    <div>
        <h3>4. Controlelijst:</h3>
        <ul id="checklist">
            <li>✅ Pagina geladen</li>
        </ul>
    </div>
    
    <script>
        // Toon huidig domein
        const domain = window.location.hostname;
        document.getElementById('domain').textContent = domain;
        
        // Jouw Firebase config - VERVANG DIT!
const firebaseConfig = {
  apiKey: "AIzaSyCO2ndD-lTBZpRrs-ZxIsBTVjPVza2sFXU",
  authDomain: "schoolquizapp-28abf.firebaseapp.com",
  projectId: "schoolquizapp-28abf",
  storageBucket: "schoolquizapp-28abf.firebasestorage.app",
  messagingSenderId: "921022621334",
  appId: "1:921022621334:web:ef582f1e067a77a41284b7"
};
        
        // Toon config
        document.getElementById('config').textContent = JSON.stringify(firebaseConfig, null, 2);
        
        // Test login
        function testLogin() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "<p>Initialiseren...</p>";
            
            try {
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                const auth = firebase.auth();
                
                resultDiv.innerHTML += "<p>Firebase geïnitialiseerd</p>";
                
                // Test Google login
                const provider = new firebase.auth.GoogleAuthProvider();
                
                auth.signInWithPopup(provider)
                    .then((result) => {
                        resultDiv.innerHTML = `
                            <p class="success">✅ Login succesvol!</p>
                            <p>Email: ${result.user.email}</p>
                            <p>UID: ${result.user.uid}</p>
                            <p><strong>authDomain in config moet overeenkomen met geautoriseerd domein</strong></p>
                        `;
                        
                        // Update checklist
                        document.getElementById('checklist').innerHTML += `
                            <li class="success">✅ Firebase geïnitialiseerd</li>
                            <li class="success">✅ Google login werkt</li>
                        `;
                    })
                    .catch((error) => {
                        console.error("Login error:", error);
                        resultDiv.innerHTML = `
                            <p class="error">❌ Login fout: ${error.code}</p>
                            <p class="error">${error.message}</p>
                            
                            <h4>Oplossingen:</h4>
                            <ul>
                                <li><strong>Domein mismatch:</strong> Controleer authDomain in config</li>
                                <li><strong>Niet geautoriseerd:</strong> Voeg '${domain}' toe aan Firebase Console</li>
                                <li><strong>Google login niet aan:</strong> Zet Google Sign-in aan in Firebase Console</li>
                                <li><strong>Wacht op propagatie:</strong> Wijzigingen kunnen 5-60 min duren</li>
                            </ul>
                            
                            <p><button onclick="window.open('https://console.firebase.google.com/project/${firebaseConfig.projectId}/authentication/settings', '_blank')">
                                Open Firebase Console
                            </button></p>
                        `;
                    });
                    
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">Initialisatie fout: ${error.message}</p>`;
            }
        }
        
        // Controleer of authDomain overeenkomt met mogelijke project
        const authDomain = firebaseConfig.authDomain;
        const projectFromDomain = authDomain.replace('.firebaseapp.com', '');
        
        document.getElementById('checklist').innerHTML += `
            <li>Project ID in config: ${firebaseConfig.projectId}</li>
            <li>Auth Domain: ${authDomain}</li>
            <li>Project uit authDomain: ${projectFromDomain}</li>
            <li>Match: ${firebaseConfig.projectId === projectFromDomain ? '✅' : '❌ (probleem!)'}</li>
        `;
    </script>
    
    <div style="margin-top: 30px; padding: 15px; background: #e3f2fd; border-radius: 5px;">
        <h3>Quick Fixes:</h3>
        <ol>
            <li><strong>Probeer incognito modus</strong> (Ctrl+Shift+N)</li>
            <li><strong>Clear cache:</strong> Ctrl+Shift+Delete → "Cached images and files"</li>
            <li><strong>Wacht 10 minuten</strong> en probeer opnieuw</li>
            <li><strong>Controleer of je het juiste project</strong> hebt geselecteerd in Firebase Console</li>
        </ol>
        
        <p><strong>Directe link naar je project:</strong><br>
        <a href="#" id="firebaseLink">Loading...</a></p>
    </div>
    
    <script>
        // Genereer directe link naar Firebase Console
        if (firebaseConfig.projectId && !firebaseConfig.projectId.includes('quiz-app')) {
            const link = `https://console.firebase.google.com/project/${firebaseConfig.projectId}/authentication/settings`;
            document.getElementById('firebaseLink').href = link;
            document.getElementById('firebaseLink').textContent = link;
        }
    </script>
</body>
</html>
